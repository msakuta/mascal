"use strict";(self.webpackChunkrust_webpack_template=self.webpackChunkrust_webpack_template||[]).push([[279],{279(e,n,t){var r=t(923),o=t(408);function a(e){return new RegExp("^(?:"+e.join("|")+")$","i")}(0,o.lI)(r),r.__wbindgen_start();var c=a(["print","puts","type","len","push","hex_string"]),i=a(["break","return","var","fn","if","else","for","in","to","while","i32","i64","f32","f64","str","struct"]),l=a(["\\(","{","\\["]),d=a(["\\)","}","\\]"]),u=new RegExp("^(?:"+["\\)","}","\\]"].join("|")+")","i");function s(e,n){var t,r,o=e.next();return"/"===o&&e.eat("/")?(e.skipToEnd(),"comment"):"/"===o&&e.eat("*")?(n.cur=(e,n)=>{for(;null!=(o=e.next());)if("*"==o&&e.eat("/"))return n.cur=s,"blockComment";return"blockComment"},"blockComment"):'"'==o||"'"==o?(n.cur=(t=o,function(e,n){for(var r,o=!1;null!=(r=e.next())&&(r!=t||o);)o=!o&&"\\"==r;return o||(n.cur=s),"string"}))(e,n):"["==o&&/[\[=]/.test(e.peek())?(n.cur=(r=function(e){for(var n=0;e.eat("=");)++n;return e.eat("["),n}(e),function(e,n){for(var t,o=null;null!=(t=e.next());)if(null==o)"]"==t&&(o=0);else if("="==t)++o;else{if("]"==t&&o==r){n.cur=s;break}o=null}return"string"}))(e,n):/\d/.test(o)?(e.eatWhile(/[\w.%]/),"number"):/[\w_]/.test(o)?(e.eatWhile(/[\w\\\-_.]/),"variable"):null}const g={name:"mascal",startState:function(){return{basecol:0,indentDepth:0,cur:s}},token:function(e,n){if(e.eatSpace())return null;var t=n.cur(e,n),r=e.current();return"variable"==t&&(i.test(r)?t="keyword":c.test(r)&&(t="builtin")),"comment"!=t&&"string"!=t&&(l.test(r)?++n.indentDepth:d.test(r)&&--n.indentDepth),t},indent:function(e,n,t){var r=u.test(n);return e.basecol+t.unit*(e.indentDepth-(r?1:0))},languageData:{indentOnInput:/^\s*(?:else|\)|\})$/,commentTokens:{line:"--",block:{open:"--[[",close:"]]--"}}}};var f=t(472),m=t(585),_=t(554),h=t(898);async function p(e){const n=document.getElementById("output");n.value="";const t=document.getElementById("canvas"),r=t.getBoundingClientRect();t.getContext("2d").clearRect(0,0,r.width,r.height);const o=y.state.doc.toString(),a=performance.now();try{e(o)}catch(e){n.value=e}const c=performance.now();document.getElementById("timeMessage").innerHTML=`Execution time: ${(c-a).toFixed(1)} ms (See <a href="#Time">notes</a>)`}document.getElementById("typeCheck").addEventListener("click",()=>p(e=>{const n=(0,o.s)(e);document.getElementById("output").value=n})),document.getElementById("run").addEventListener("click",()=>p(o.M7)),document.getElementById("parseAst").addEventListener("click",()=>p(e=>{const n=(0,o.Vv)(e);document.getElementById("output").value=n})),document.getElementById("compile").addEventListener("click",()=>p(e=>{const n=(0,o.wE)(e);document.getElementById("output").value=n})),document.getElementById("disasm").addEventListener("click",()=>p(e=>{const n=(0,o.M0)(e);document.getElementById("output").value=n})),document.getElementById("compileAndRun").addEventListener("click",()=>p(e=>{(0,o.go)(e)})),document.getElementById("clearCanvas").addEventListener("click",()=>{const e=document.getElementById("canvas"),n=e.getBoundingClientRect();e.getContext("2d").clearRect(0,0,n.width,n.height)});const w=document.getElementById("samples");async function v(e){const n=await fetch("scripts/"+e),t=await n.text();let r=y.state.doc.length;const o=y.state.update({changes:{from:0,to:r},sequential:!0},{changes:{from:0,insert:t},sequential:!0});y.dispatch(o),location.hash=`#${e}`}["expr.dragon","factorial.dragon","fibonacci.dragon","recurse.dragon","mandel.dragon","mandel_struct.dragon","mandel_canvas.dragon","str.dragon","type.dragon","sieve.dragon","if.dragon","for.dragon","fn.dragon","array.dragon","array_reverse.dragon","array_range_sized.dragon","array_overrun.dragon","array_resize.dragon","canvas.dragon","typecheck.dragon","cast.dragon","cast_error.dragon","pipe.dragon","cmp.dragon","struct.dragon","struct_infer.dragon","struct_nested.dragon","fn_obj.dragon","fn_obj_ret.dragon","fn_callback.dragon"].forEach(e=>{const n=document.createElement("a");n.href="#",n.addEventListener("click",()=>v(e)),n.innerHTML=e,w.appendChild(n),w.append(" ")}),0!==location.hash.length&&v(location.hash.substring(1));let b=m.$t.create({extensions:[_.oQ,f.Tg.define(g)],doc:"\nfn fact(n: i64) -> i64 {\n    if n < 1 {\n        1\n    } else {\n        n * fact(n - 1)\n    }\n}\n\nprint(fact(5));\n"}),y=new h.Lz({state:b,parent:document.getElementById("highlighting")})},408(e,n,t){t.d(n,{M0:()=>w,M7:()=>b,Vv:()=>v,ak:()=>k,bL:()=>B,go:()=>p,lI:()=>a,pY:()=>I,s:()=>y,ve:()=>E,wE:()=>h});var r=t(665);let o;function a(e){o=e}function c(e,n){return function(e,n){return f+=n,f>=g&&(s=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}),s.decode(),f=n),s.decode(l().subarray(e,e+n))}(e>>>=0,n)}let i=null;function l(){return null!==i&&0!==i.byteLength||(i=new Uint8Array(o.memory.buffer)),i}function d(e,n,t){if(void 0===t){const t=m.encode(e),r=n(t.length,1)>>>0;return l().subarray(r,r+t.length).set(t),_=t.length,r}let r=e.length,o=n(r,1)>>>0;const a=l();let c=0;for(;c<r;c++){const n=e.charCodeAt(c);if(n>127)break;a[o+c]=n}if(c!==r){0!==c&&(e=e.slice(c)),o=t(o,r,r=c+3*e.length,1)>>>0;const n=l().subarray(o+c,o+r);c+=m.encodeInto(e,n).written,o=t(o,r,c,1)>>>0}return _=c,o}function u(e){const n=o.__wbindgen_externrefs.get(e);return o.__externref_table_dealloc(e),n}let s=new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0});s.decode();const g=2146435072;let f=0;const m=new TextEncoder;"encodeInto"in m||(m.encodeInto=function(e,n){const t=m.encode(e);return n.set(t),{read:e.length,written:t.length}});let _=0;function h(e){const n=d(e,o.__wbindgen_malloc,o.__wbindgen_realloc),t=_,r=o.compile(n,t);if(r[3])throw u(r[2]);var a,c,i=(a=r[0],c=r[1],a>>>=0,l().subarray(a/1,a/1+c)).slice();return o.__wbindgen_free(r[0],1*r[1],1),i}function p(e){const n=d(e,o.__wbindgen_malloc,o.__wbindgen_realloc),t=_,r=o.compile_and_run(n,t);if(r[1])throw u(r[0])}function w(e){let n,t;try{const i=d(e,o.__wbindgen_malloc,o.__wbindgen_realloc),l=_,s=o.disasm(i,l);var r=s[0],a=s[1];if(s[3])throw r=0,a=0,u(s[2]);return n=r,t=a,c(r,a)}finally{o.__wbindgen_free(n,t,1)}}function v(e){let n,t;try{const i=d(e,o.__wbindgen_malloc,o.__wbindgen_realloc),l=_,s=o.parse_ast(i,l);var r=s[0],a=s[1];if(s[3])throw r=0,a=0,u(s[2]);return n=r,t=a,c(r,a)}finally{o.__wbindgen_free(n,t,1)}}function b(e){const n=d(e,o.__wbindgen_malloc,o.__wbindgen_realloc),t=_,r=o.run_script(n,t);if(r[1])throw u(r[0])}function y(e){const n=d(e,o.__wbindgen_malloc,o.__wbindgen_realloc),t=_,r=o.type_check(n,t);if(r[2])throw u(r[1]);return u(r[0])}function E(e,n){(0,r.tG)(c(e,n))}function k(e,n){(0,r.aS)(c(e,n))}function I(e,n){return c(e,n)}function B(){const e=o.__wbindgen_externrefs,n=e.grow(4);e.set(0,void 0),e.set(n+0,void 0),e.set(n+1,null),e.set(n+2,!0),e.set(n+3,!1)}},665(e,n,t){function r(e){document.getElementById("output").value+=e}function o(e){document.getElementById("canvas").getContext("2d").fillStyle=e}function a(e,n,t,r){document.getElementById("canvas").getContext("2d").fillRect(e,n,t,r)}t.d(n,{Bt:()=>a,aS:()=>o,tG:()=>r})},923(e,n,t){var r=t.w[e.id];for(var o in t.r(n),r)o&&(n[o]=r[o]);t(408),t(665),r[""]()}}]);