"use strict";(self.webpackChunkrust_webpack_template=self.webpackChunkrust_webpack_template||[]).push([[454],{454:(e,n,t)=>{var r=t(903);function o(e){return new RegExp("^(?:"+e.join("|")+")$","i")}var a=o(["print","puts","type","len","push","hex_string"]),c=o(["break","return","var","fn","if","else","for","in","to","while","i32","i64","f32","f64","str"]),i=o(["\\(","{","\\["]),d=o(["\\)","}","\\]"]),l=new RegExp("^(?:"+["\\)","}","\\]"].join("|")+")","i");function u(e,n){var t,r,o=e.next();return"/"===o&&e.eat("/")?(e.skipToEnd(),"comment"):"/"===o&&e.eat("*")?(n.cur=(e,n)=>{for(;null!=(o=e.next());)if("*"==o&&e.eat("/"))return n.cur=u,"blockComment";return"blockComment"},"blockComment"):'"'==o||"'"==o?(n.cur=(t=o,function(e,n){for(var r,o=!1;null!=(r=e.next())&&(r!=t||o);)o=!o&&"\\"==r;return o||(n.cur=u),"string"}))(e,n):"["==o&&/[\[=]/.test(e.peek())?(n.cur=(r=function(e){for(var n=0;e.eat("=");)++n;return e.eat("["),n}(e),function(e,n){for(var t,o=null;null!=(t=e.next());)if(null==o)"]"==t&&(o=0);else if("="==t)++o;else{if("]"==t&&o==r){n.cur=u;break}o=null}return"string"}))(e,n):/\d/.test(o)?(e.eatWhile(/[\w.%]/),"number"):/[\w_]/.test(o)?(e.eatWhile(/[\w\\\-_.]/),"variable"):null}const s={name:"mascal",startState:function(){return{basecol:0,indentDepth:0,cur:u}},token:function(e,n){if(e.eatSpace())return null;var t=n.cur(e,n),r=e.current();return"variable"==t&&(c.test(r)?t="keyword":a.test(r)&&(t="builtin")),"comment"!=t&&"string"!=t&&(i.test(r)?++n.indentDepth:d.test(r)&&--n.indentDepth),t},indent:function(e,n,t){var r=l.test(n);return e.basecol+t.unit*(e.indentDepth-(r?1:0))},languageData:{indentOnInput:/^\s*(?:else|\)|\})$/,commentTokens:{line:"--",block:{open:"--[[",close:"]]--"}}}};var g=t(472),f=t(585),_=t(554),m=t(898);async function p(e){const n=document.getElementById("output");n.value="";const t=document.getElementById("canvas"),r=t.getBoundingClientRect();t.getContext("2d").clearRect(0,0,r.width,r.height);const o=w.state.doc.toString(),a=performance.now();try{e(o)}catch(e){n.value=e}const c=performance.now();document.getElementById("timeMessage").innerHTML=`Execution time: ${(c-a).toFixed(1)} ms (See <a href="#Time">notes</a>)`}document.getElementById("typeCheck").addEventListener("click",(()=>p((e=>{const n=(0,r.s)(e);document.getElementById("output").value=n})))),document.getElementById("run").addEventListener("click",(()=>p(r.M7))),document.getElementById("parseAst").addEventListener("click",(()=>p((e=>{const n=(0,r.Vv)(e);document.getElementById("output").value=n})))),document.getElementById("compile").addEventListener("click",(()=>p((e=>{const n=(0,r.wE)(e);document.getElementById("output").value=n})))),document.getElementById("disasm").addEventListener("click",(()=>p((e=>{const n=(0,r.M0)(e);document.getElementById("output").value=n})))),document.getElementById("compileAndRun").addEventListener("click",(()=>p((e=>{(0,r.go)(e)})))),document.getElementById("clearCanvas").addEventListener("click",(()=>{const e=document.getElementById("canvas"),n=e.getBoundingClientRect();e.getContext("2d").clearRect(0,0,n.width,n.height)}));const y=document.getElementById("samples");["expr.dragon","factorial.dragon","fibonacci.dragon","recurse.dragon","mandel.dragon","mandel_canvas.dragon","str.dragon","type.dragon","sieve.dragon","if.dragon","for.dragon","fn.dragon","array.dragon","array_reverse.dragon","array_range_sized.dragon","array_overrun.dragon","array_resize.dragon","canvas.dragon","typecheck.dragon","cast.dragon","cast_error.dragon"].forEach((e=>{const n=document.createElement("a");n.href="#",n.addEventListener("click",(async()=>{const n=await fetch("scripts/"+e),t=await n.text();let r=w.state.doc.length;const o=w.state.update({changes:{from:0,to:r},sequential:!0},{changes:{from:0,insert:t},sequential:!0});w.dispatch(o)})),n.innerHTML=e,y.appendChild(n),y.append(" ")}));let v=f.$t.create({extensions:[_.oQ,g.Tg.define(s)],doc:"\nfn fact(n: i64) -> i64 {\n    if n < 1 {\n        1\n    } else {\n        n * fact(n - 1)\n    }\n}\n\nprint(fact(5));\n"}),w=new m.Lz({state:v,parent:document.getElementById("highlighting")})},903:(e,n,t)=>{t.d(n,{M0:()=>E,M7:()=>y,NC:()=>B,PG:()=>C,Vv:()=>b,go:()=>k,it:()=>I,s:()=>p,wE:()=>h,yc:()=>x});var r=t(498),o=t(923);let a=new("undefined"==typeof TextDecoder?(0,module.require)("util").TextDecoder:TextDecoder)("utf-8",{ignoreBOM:!0,fatal:!0});a.decode();let c=null;function i(){return null!==c&&c.buffer===o.memory.buffer||(c=new Uint8Array(o.memory.buffer)),c}function d(e,n){return a.decode(i().subarray(e,e+n))}const l=new Array(32).fill(void 0);l.push(void 0,null,!0,!1);let u=l.length;function s(e){const n=function(e){return l[e]}(e);return function(e){e<36||(l[e]=u,u=e)}(e),n}let g=0,f=new("undefined"==typeof TextEncoder?(0,module.require)("util").TextEncoder:TextEncoder)("utf-8");const _="function"==typeof f.encodeInto?function(e,n){return f.encodeInto(e,n)}:function(e,n){const t=f.encode(e);return n.set(t),{read:e.length,written:t.length}};function m(e,n,t){if(void 0===t){const t=f.encode(e),r=n(t.length);return i().subarray(r,r+t.length).set(t),g=t.length,r}let r=e.length,o=n(r);const a=i();let c=0;for(;c<r;c++){const n=e.charCodeAt(c);if(n>127)break;a[o+c]=n}if(c!==r){0!==c&&(e=e.slice(c)),o=t(o,r,r=c+3*e.length);const n=i().subarray(o+c,o+r);c+=_(e,n).written}return g=c,o}function p(e){var n=m(e,o.__wbindgen_malloc,o.__wbindgen_realloc),t=g;return s(o.type_check(n,t))}function y(e){var n=m(e,o.__wbindgen_malloc,o.__wbindgen_realloc),t=g;o.run_script(n,t)}let v=null;function w(){return null!==v&&v.buffer===o.memory.buffer||(v=new Int32Array(o.memory.buffer)),v}function b(e){try{const c=o.__wbindgen_add_to_stack_pointer(-16);var n=m(e,o.__wbindgen_malloc,o.__wbindgen_realloc),t=g;o.parse_ast(c,n,t);var r=w()[c/4+0],a=w()[c/4+1];return d(r,a)}finally{o.__wbindgen_add_to_stack_pointer(16),o.__wbindgen_free(r,a)}}function h(e){try{const u=o.__wbindgen_add_to_stack_pointer(-16);var n=m(e,o.__wbindgen_malloc,o.__wbindgen_realloc),t=g;o.compile(u,n,t);var r=w()[u/4+0],a=w()[u/4+1],c=(d=r,l=a,i().subarray(d/1,d/1+l)).slice();return o.__wbindgen_free(r,1*a),c}finally{o.__wbindgen_add_to_stack_pointer(16)}var d,l}function E(e){try{const c=o.__wbindgen_add_to_stack_pointer(-16);var n=m(e,o.__wbindgen_malloc,o.__wbindgen_realloc),t=g;o.disasm(c,n,t);var r=w()[c/4+0],a=w()[c/4+1];return d(r,a)}finally{o.__wbindgen_add_to_stack_pointer(16),o.__wbindgen_free(r,a)}}function k(e){var n=m(e,o.__wbindgen_malloc,o.__wbindgen_realloc),t=g;o.compile_and_run(n,t)}const B=function(e,n){(0,r.aS)(d(e,n))},I=function(e,n){(0,r.tG)(d(e,n))},x=function(e,n){return function(e){u===l.length&&l.push(l.length+1);const n=u;return u=l[n],l[n]=e,n}(d(e,n))},C=function(e){throw s(e)}},498:(e,n,t)=>{function r(e){document.getElementById("output").value+=e}function o(e){document.getElementById("canvas").getContext("2d").fillStyle=e}function a(e,n,t,r){document.getElementById("canvas").getContext("2d").fillRect(e,n,t,r)}t.d(n,{Bt:()=>a,aS:()=>o,tG:()=>r})},923:(e,n,t)=>{var r=t.w[e.id];e.exports=r,t(903),t(498),r[""]()}}]);